# ๐ ูุธุงู ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช - Accounts Management System

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุญุณุงุจุงุช ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ูุน ุฏุนู ููุตุงุช ูุชุนุฏุฏุฉุ ูุฑุชุจุท ุจุงููุณุชุฎุฏููู ููุญููุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `social_accounts`

```sql
- id: ูุนุฑู ุงูุญุณุงุจ
- user_id: ูุนุฑู ุงููุณุชุฎุฏู (ูุฑุชุจุท ุจุฌุฏูู users)
- platform: ุงูููุตุฉ (x, instagram, facebook, linkedin, tiktok)
- username: ุงุณู ุงููุณุชุฎุฏู
- display_name: ุงูุงุณู ุงููุนุฑูุถ
- account_label: ุชุณููุฉ ูุฎุตุตุฉ ููุญุณุงุจ
- cookie_filename: ุงุณู ููู ุงูููููุฒ
- status: ุงูุญุงูุฉ (active, inactive, expired, error)
- last_login: ุขุฎุฑ ุชุณุฌูู ุฏุฎูู
- last_used: ุขุฎุฑ ุงุณุชุฎุฏุงู
- error_message: ุฑุณุงูุฉ ุงูุฎุทุฃ (ุฅู ูุฌุฏุช)
- metadata: ูุนูููุงุช ุฅุถุงููุฉ (JSON)
- created_at: ุชุงุฑูุฎ ุงูุฅูุดุงุก
- updated_at: ุชุงุฑูุฎ ุงูุชุญุฏูุซ
```

---

## ๐ API Endpoints

### ๐ค ูููุณุชุฎุฏููู (User APIs)

#### 1. ุงูุญุตูู ุนูู ุญุณุงุจุงุชู
```http
GET /api/my/accounts
Query Parameters:
  - platform: x, instagram, facebook (ุงุฎุชูุงุฑู)
  - status: active, inactive, expired, error (ุงุฎุชูุงุฑู)
```

**Response:**
```json
[
  {
    "id": 1,
    "platform": "x",
    "username": "Ga6rsah",
    "display_name": "Ga6rsah",
    "account_label": "Ga6rsah",
    "status": "active",
    "last_login": "2026-01-22T00:00:00",
    "last_used": "2026-01-22T00:30:00",
    "created_at": "2026-01-22T00:00:00"
  }
]
```

#### 2. ุฅุญุตุงุฆูุงุช ุญุณุงุจุงุชู
```http
GET /api/my/accounts/stats
```

**Response:**
```json
{
  "total": 5,
  "active": 3,
  "inactive": 1,
  "expired": 1,
  "error": 0,
  "by_platform": {
    "x": 3,
    "instagram": 2
  }
}
```

#### 3. ุชูุงุตูู ุญุณุงุจ ูุนูู
```http
GET /api/my/accounts/{account_id}
```

#### 4. ุญุฐู ุญุณุงุจ
```http
DELETE /api/my/accounts/{account_id}
```

**Response:**
```json
{
  "success": true,
  "message": "ุชู ุญุฐู ุงูุญุณุงุจ Ga6rsah ุนูู x",
  "account_id": 1
}
```

---

### ๐ ููุฅุฏุงุฑุฉ (Admin APIs)

#### 1. ุงูุญุตูู ุนูู ุฌููุน ุงูุญุณุงุจุงุช
```http
GET /api/admin/accounts
Query Parameters:
  - platform: x, instagram, facebook (ุงุฎุชูุงุฑู)
  - status: active, inactive, expired, error (ุงุฎุชูุงุฑู)
  - limit: ุงูุญุฏ ุงูุฃูุตู ูููุชุงุฆุฌ (ุงูุชุฑุงุถู: 100)
```

**Response:**
```json
[
  {
    "id": 1,
    "user_id": 5,
    "user_email": "user@example.com",
    "user_name": "ูุญูุฏ",
    "platform": "x",
    "username": "Ga6rsah",
    "display_name": "Ga6rsah",
    "account_label": "Ga6rsah",
    "status": "active",
    "last_login": "2026-01-22T00:00:00",
    "last_used": "2026-01-22T00:30:00",
    "error_message": null,
    "created_at": "2026-01-22T00:00:00",
    "updated_at": "2026-01-22T00:30:00"
  }
]
```

#### 2. ุฅุญุตุงุฆูุงุช ุฌููุน ุงูุญุณุงุจุงุช
```http
GET /api/admin/accounts/stats
```

#### 3. ุญุณุงุจุงุช ูุณุชุฎุฏู ูุนูู
```http
GET /api/admin/accounts/user/{user_id}
```

#### 4. ุญุฐู ุญุณุงุจ (ุฅุฏุงุฑุฉ)
```http
DELETE /api/admin/accounts/{account_id}
```

#### 5. ุชุญุฏูุซ ุญุงูุฉ ุญุณุงุจ
```http
PATCH /api/admin/accounts/{account_id}/status
Query Parameters:
  - status: active, inactive, expired, error
  - error_message: ุฑุณุงูุฉ ุงูุฎุทุฃ (ุงุฎุชูุงุฑู)
```

---

## ๐ค ุงูุชูุงูู ูุน ุงููููุงุก

### ุชุณุฌูู ุงูุฏุฎูู ุงูุชููุงุฆู

ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ ุงููููู:
```
ุณุฌู ุฏุฎูู ุงูููุฒุฑ Ga6rsah ุงูุจุงุณูุฑุฏ Mm8221809--
```

ูุชู:
1. โ ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู Playwright
2. โ ุญูุธ ุงูููููุฒ ูู `app/x/cookies/`
3. โ **ุญูุธ ุงูุญุณุงุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู**
4. โ ุฑุจุท ุงูุญุณุงุจ ุจุงููุณุชุฎุฏู ุงูุญุงูู

---

## ๐ ุญุงูุงุช ุงูุญุณุงุจ (Account Status)

| ุงูุญุงูุฉ | ุงููุตู |
|--------|-------|
| `active` | ุงูุญุณุงุจ ูุดุท ููุนูู |
| `inactive` | ุงูุญุณุงุจ ุบูุฑ ูุดุท ูุคูุชุงู |
| `expired` | ุงูุฌูุณุฉ ููุชููุฉ - ูุญุชุงุฌ ุฅุนุงุฏุฉ ุชุณุฌูู ุฏุฎูู |
| `error` | ุญุฏุซ ุฎุทุฃ ูู ุงูุญุณุงุจ |

---

## ๐ ุงูุชุญุฏูุซ ุงูุชููุงุฆู

### ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู:
- `status` โ `active`
- `last_login` โ ุงูุขู
- `error_message` โ `null`

### ุนูุฏ ุงูุงุณุชุฎุฏุงู:
- `last_used` โ ุงูุขู

### ุนูุฏ ุญุฏูุซ ุฎุทุฃ:
- `status` โ `error` ุฃู `expired`
- `error_message` โ ุชูุงุตูู ุงูุฎุทุฃ

---

## ๐๏ธ ุญุฐู ุงูุญุณุงุจ

ุนูุฏ ุญุฐู ุญุณุงุจ:
1. โ ุญุฐู ุงูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. โ ุญุฐู ููู ุงูููููุฒ ูู `app/x/cookies/`
3. โ ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช

---

## ๐ฌ ุงููุญุงุฏุซุงุช

### ุฌุฏูู `conversations`
- ูุฑุชุจุท ุจุงููุณุชุฎุฏู (`user_id`)
- ูุญูุธ ุฌููุน ุงููุญุงุฏุซุงุช
- ูุชุชุจุน ุงูุฌูุณุงุช (`session_id`)

### ุฌุฏูู `messages`
- ูุฑุชุจุท ุจุงููุญุงุฏุซุฉ (`conversation_id`)
- ูุญูุธ ูู ุฑุณุงูุฉ (ูุณุชุฎุฏู/ูุณุงุนุฏ)
- ูุญูุธ ุงูููุฉ ูุงูุซูุฉ ูุงููููู ุงููุณุชุฎุฏู

### API Endpoints ูููุญุงุฏุซุงุช:
```http
GET /api/conversations/              # ุฌููุน ูุญุงุฏุซุงุชู
GET /api/conversations/{id}          # ุชูุงุตูู ูุญุงุฏุซุฉ
GET /api/conversations/stats/summary # ุฅุญุตุงุฆูุงุช
```

---

## ๐จ ููุญุฉ ุงูุชุญูู (Frontend)

### ุตูุญุงุช ููุชุฑุญุฉ:

#### 1. **ุตูุญุฉ ุงูุญุณุงุจุงุช** (`/accounts`)
- ุนุฑุถ ุฌููุน ุงูุญุณุงุจุงุช
- ุชุตููุฉ ุญุณุจ ุงูููุตุฉ ูุงูุญุงูุฉ
- ุฅุถุงูุฉ ุญุณุงุจ ุฌุฏูุฏ
- ุญุฐู ุญุณุงุจ

#### 2. **ุตูุญุฉ ุงููุญุงุฏุซุงุช** (`/conversations`)
- ุนุฑุถ ุฌููุน ุงููุญุงุฏุซุงุช
- ุงูุจุญุซ ูู ุงููุญุงุฏุซุงุช
- ุนุฑุถ ุชูุงุตูู ูุญุงุฏุซุฉ

#### 3. **ููุญุฉ ุงูุฅุฏุงุฑุฉ** (`/admin/accounts`)
- ุนุฑุถ ุฌููุน ุญุณุงุจุงุช ุงููุณุชุฎุฏููู
- ุฅุญุตุงุฆูุงุช ุดุงููุฉ
- ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช (ุชูุนูู/ุชุนุทูู/ุญุฐู)

---

## ๐ ุงูุตูุงุญูุงุช

### ุงููุณุชุฎุฏู ุงูุนุงุฏู:
- โ ุนุฑุถ ุญุณุงุจุงุชู ููุท
- โ ุฅุถุงูุฉ ุญุณุงุจ ุฌุฏูุฏ
- โ ุญุฐู ุญุณุงุจุงุชู
- โ ุนุฑุถ ูุญุงุฏุซุงุชู

### ุงูุฅุฏุงุฑุฉ:
- โ ุนุฑุถ ุฌููุน ุงูุญุณุงุจุงุช
- โ ุนุฑุถ ุญุณุงุจุงุช ุฃู ูุณุชุฎุฏู
- โ ุญุฐู ุฃู ุญุณุงุจ
- โ ุชุญุฏูุซ ุญุงูุฉ ุฃู ุญุณุงุจ
- โ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ุงูุดุงููุฉ

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### Python (Backend)
```python
from app.services.account_service import account_service
from app.db.database import get_db

db = next(get_db())

# ุฅูุดุงุก ุญุณุงุจ
account = account_service.create_account(
    db=db,
    user_id=1,
    platform="x",
    username="test_user",
    account_label="ุญุณุงุจู ุงูุฑุฆูุณู"
)

# ุงูุญุตูู ุนูู ุญุณุงุจุงุช ุงููุณุชุฎุฏู
accounts = account_service.get_user_accounts(
    db=db,
    user_id=1,
    platform="x"
)

# ุญุฐู ุญุณุงุจ
success = account_service.delete_account(
    db=db,
    account_id=1,
    user_id=1
)
```

### JavaScript (Frontend)
```javascript
// ุงูุญุตูู ุนูู ุญุณุงุจุงุชู
const response = await fetch('http://localhost:8000/api/my/accounts');
const accounts = await response.json();

// ุญุฐู ุญุณุงุจ
await fetch(`http://localhost:8000/api/my/accounts/${accountId}`, {
  method: 'DELETE',
  headers: {
    'Authorization': `Bearer ${token}`
  }
});

// ุฅุญุตุงุฆูุงุช
const stats = await fetch('http://localhost:8000/api/my/accounts/stats');
```

---

## โ ุงูููุฒุงุช ุงูููุชููุฉ

1. โ ุฌุฏูู `social_accounts` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. โ ุฎุฏูุฉ `AccountService` ูุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช
3. โ API endpoints ูููุณุชุฎุฏููู
4. โ API endpoints ููุฅุฏุงุฑุฉ
5. โ ุฑุจุท ุชุณุฌูู ุงูุฏุฎูู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
6. โ ุญุฐู ุงูุญุณุงุจ ูููู ุงูููููุฒ
7. โ ุชุชุจุน ุญุงูุฉ ุงูุญุณุงุจ
8. โ ุฅุญุตุงุฆูุงุช ุดุงููุฉ
9. โ ูุธุงู ุงููุญุงุฏุซุงุช ูุญููุธ ุจุงููุนู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### Frontend:
1. ุฅูุดุงุก ุตูุญุฉ `/accounts` ูุนุฑุถ ุงูุญุณุงุจุงุช
2. ุฅูุดุงุก ุตูุญุฉ `/conversations` ูุนุฑุถ ุงููุญุงุฏุซุงุช
3. ุฅูุดุงุก ููุญุฉ ุชุญูู ุฅุฏุงุฑูุฉ `/admin/accounts`
4. ุฅุถุงูุฉ ููููุงุช UI ููุฅุญุตุงุฆูุงุช

### Backend:
1. ุฅุถุงูุฉ ุฏุนู ูููุตุงุช ุฃุฎุฑู (Instagram, Facebook)
2. ุฅุถุงูุฉ ุฌุฏููุฉ ุงูููุดูุฑุงุช
3. ุฅุถุงูุฉ ุชูุงุฑูุฑ ูุชุญูููุงุช

---

## ๐ ุงูุฏุนู

ูููุฒูุฏ ูู ุงููุนูููุงุช ุฃู ุงููุณุงุนุฏุฉุ ุฑุงุฌุน:
- `AGENTS_README.md` - ูุธุงู ุงููููุงุก
- `X_INTEGRATION_README.md` - ุชูุงูู X
- `MEMORY_SYSTEM_README.md` - ูุธุงู ุงูุฐุงูุฑุฉ

---

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**
